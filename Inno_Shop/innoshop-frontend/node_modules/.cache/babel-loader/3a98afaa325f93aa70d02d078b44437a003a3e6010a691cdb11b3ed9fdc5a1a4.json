{"ast":null,"code":"import axios from \"axios\";\nimport { USERS_API_URL, PRODUCTS_API_URL } from \"../utils/constants\";\nimport { getToken, removeToken, removeUser } from \"../utils/helpers\";\nexport const usersApi = axios.create({\n  baseURL: USERS_API_URL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport const productsApi = axios.create({\n  baseURL: PRODUCTS_API_URL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nconst requestInterceptor = config => {\n  const token = getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n};\nconst responseErrorInterceptor = error => {\n  if (error.response) {\n    const {\n      status\n    } = error.response;\n    if (status === 401) {\n      removeToken();\n      removeUser();\n      const publicPaths = [\"/login\", \"/register\", \"/confirm-email\", \"/forgot-password\", \"/reset-password\"];\n      const currentPath = window.location.pathname;\n      if (!publicPaths.includes(currentPath)) {\n        window.location.href = \"/login\";\n      }\n    }\n    if (status === 403) {\n      console.error(\"Access denied: You do not have permission to access this resource\");\n    }\n  }\n  return Promise.reject(error);\n};\nusersApi.interceptors.request.use(requestInterceptor);\nusersApi.interceptors.response.use(response => response, responseErrorInterceptor);\nproductsApi.interceptors.request.use(requestInterceptor);\nproductsApi.interceptors.response.use(response => response, responseErrorInterceptor);\nexport default {\n  usersApi,\n  productsApi\n};","map":{"version":3,"names":["axios","USERS_API_URL","PRODUCTS_API_URL","getToken","removeToken","removeUser","usersApi","create","baseURL","headers","productsApi","requestInterceptor","config","token","Authorization","responseErrorInterceptor","error","response","status","publicPaths","currentPath","window","location","pathname","includes","href","console","Promise","reject","interceptors","request","use"],"sources":["/home/artem/Code/InnoShop/Inno_Shop/innoshop-frontend/src/api/axiosConfig.js"],"sourcesContent":["import axios from \"axios\";\nimport { USERS_API_URL, PRODUCTS_API_URL } from \"../utils/constants\";\nimport { getToken, removeToken, removeUser } from \"../utils/helpers\";\n\nexport const usersApi = axios.create({\n  baseURL: USERS_API_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport const productsApi = axios.create({\n  baseURL: PRODUCTS_API_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst requestInterceptor = (config) => {\n  const token = getToken();\n\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n};\n\nconst responseErrorInterceptor = (error) => {\n  if (error.response) {\n    const { status } = error.response;\n\n    if (status === 401) {\n      removeToken();\n      removeUser();\n\n      const publicPaths = [\n        \"/login\",\n        \"/register\",\n        \"/confirm-email\",\n        \"/forgot-password\",\n        \"/reset-password\",\n      ];\n      const currentPath = window.location.pathname;\n\n      if (!publicPaths.includes(currentPath)) {\n        window.location.href = \"/login\";\n      }\n    }\n\n    if (status === 403) {\n      console.error(\n        \"Access denied: You do not have permission to access this resource\"\n      );\n    }\n  }\n\n  return Promise.reject(error);\n};\n\nusersApi.interceptors.request.use(requestInterceptor);\nusersApi.interceptors.response.use(\n  (response) => response,\n  responseErrorInterceptor\n);\n\nproductsApi.interceptors.request.use(requestInterceptor);\nproductsApi.interceptors.response.use(\n  (response) => response,\n  responseErrorInterceptor\n);\n\nexport default { usersApi, productsApi };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,EAAEC,gBAAgB,QAAQ,oBAAoB;AACpE,SAASC,QAAQ,EAAEC,WAAW,EAAEC,UAAU,QAAQ,kBAAkB;AAEpE,OAAO,MAAMC,QAAQ,GAAGN,KAAK,CAACO,MAAM,CAAC;EACnCC,OAAO,EAAEP,aAAa;EACtBQ,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,WAAW,GAAGV,KAAK,CAACO,MAAM,CAAC;EACtCC,OAAO,EAAEN,gBAAgB;EACzBO,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,MAAME,kBAAkB,GAAIC,MAAM,IAAK;EACrC,MAAMC,KAAK,GAAGV,QAAQ,CAAC,CAAC;EAExB,IAAIU,KAAK,EAAE;IACTD,MAAM,CAACH,OAAO,CAACK,aAAa,GAAG,UAAUD,KAAK,EAAE;EAClD;EAEA,OAAOD,MAAM;AACf,CAAC;AAED,MAAMG,wBAAwB,GAAIC,KAAK,IAAK;EAC1C,IAAIA,KAAK,CAACC,QAAQ,EAAE;IAClB,MAAM;MAAEC;IAAO,CAAC,GAAGF,KAAK,CAACC,QAAQ;IAEjC,IAAIC,MAAM,KAAK,GAAG,EAAE;MAClBd,WAAW,CAAC,CAAC;MACbC,UAAU,CAAC,CAAC;MAEZ,MAAMc,WAAW,GAAG,CAClB,QAAQ,EACR,WAAW,EACX,gBAAgB,EAChB,kBAAkB,EAClB,iBAAiB,CAClB;MACD,MAAMC,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ;MAE5C,IAAI,CAACJ,WAAW,CAACK,QAAQ,CAACJ,WAAW,CAAC,EAAE;QACtCC,MAAM,CAACC,QAAQ,CAACG,IAAI,GAAG,QAAQ;MACjC;IACF;IAEA,IAAIP,MAAM,KAAK,GAAG,EAAE;MAClBQ,OAAO,CAACV,KAAK,CACX,mEACF,CAAC;IACH;EACF;EAEA,OAAOW,OAAO,CAACC,MAAM,CAACZ,KAAK,CAAC;AAC9B,CAAC;AAEDV,QAAQ,CAACuB,YAAY,CAACC,OAAO,CAACC,GAAG,CAACpB,kBAAkB,CAAC;AACrDL,QAAQ,CAACuB,YAAY,CAACZ,QAAQ,CAACc,GAAG,CAC/Bd,QAAQ,IAAKA,QAAQ,EACtBF,wBACF,CAAC;AAEDL,WAAW,CAACmB,YAAY,CAACC,OAAO,CAACC,GAAG,CAACpB,kBAAkB,CAAC;AACxDD,WAAW,CAACmB,YAAY,CAACZ,QAAQ,CAACc,GAAG,CAClCd,QAAQ,IAAKA,QAAQ,EACtBF,wBACF,CAAC;AAED,eAAe;EAAET,QAAQ;EAAEI;AAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}